#:schema node_modules/wrangler/config-schema.json
name = "historical-data-queue-producer"
main = "historical-data-queue-producer.ts"
compatibility_date = "2024-01-01"

# Run every 30 minutes (optimized to stay within queue limits)
[triggers]
crons = ["*/30 * * * *"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "coinswarm-evolution"
database_id = "ac4629b2-8240-4378-b3e3-e5262cd9b285"

# Queue producer binding
[[queues.producers]]
queue = "historical-data-queue"
binding = "HISTORICAL_DATA_QUEUE"

# API keys for data sources
[vars]
COINGECKO = "YOUR_COINGECKO_KEY"
CRYPTOCOMPARE_API_KEY = "YOUR_CRYPTOCOMPARE_KEY"

# Observability - Enable logs for monitoring
[observability]
enabled = true
